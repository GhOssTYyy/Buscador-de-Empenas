<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linhas de Ônibus - João Pessoa/PB</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #8b0000 0%, #cc0000 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 600px;
            overflow: hidden;
        }
        
        .header {
            background: #cc0000;
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 15px;
            position: relative;
            z-index: 2;
        }
        
        .header-image-main {
            width: 200px;
            height: 120px;
            object-fit: contain;
            border-radius: 5px;
        }
        
        .header-image {
            width: 180px;
            height: 120px;
            object-fit: cover;
            border-radius: 10px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .header-text {
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            font-size: 32px;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 18px;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus {
            outline: none;
            border-color: #cc0000;
            box-shadow: 0 0 0 2px rgba(204, 0, 0, 0.2);
        }
        
        button {
            width: 100%;
            padding: 14px;
            background: #cc0000;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:hover {
            background: #a30000;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .result-container {
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            min-height: 150px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .result-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            font-size: 18px;
            border-bottom: 2px solid #cc0000;
            padding-bottom: 5px;
        }
        
        #resultado {
            font-size: 18px;
            color: #008000;
            font-weight: 500;
            line-height: 1.5;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(40, 167, 69, 0.3);
            border-radius: 50%;
            border-top-color: #28a745;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
            vertical-align: middle;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .info {
            color: #17a2b8;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            font-size: 14px;
            color: #6c757d;
            border-top: 1px solid #eee;
            background: #f8f9fa;
        }
        
        /* Estilos para os botões de linha - MANTIDO O TAMANHO ORIGINAL */
        .bairro-result {
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #cc0000;
        }
        
        .bairro-title {
            font-weight: 600;
            color: #cc0000;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .linhas-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 5px;
        }
        
        /* BOTÕES COM MESMO TAMANHO DOS SPANS ORIGINAIS */
        .linha-btn {
            background: #e9f7ef;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: 600;
            color: #008000;
            border: 1px solid #c3e6cb;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
            width: auto;
            display: inline-block;
        }
        
        .linha-btn:hover {
            background: #d4edda;
            transform: none;
            box-shadow: none;
        }
        
        .no-linhas {
            color: #6c757d;
            font-style: italic;
        }
        
        .clear-btn {
            background: #6c757d;
            margin-top: 10px;
        }
        
        .clear-btn:hover {
            background: #5a6268;
        }
        
        /* Modal para detalhes da linha */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 10px;
            width: 90%;
            max-width: 1000px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 2px solid #cc0000;
            padding-bottom: 10px;
        }
        
        .modal-title {
            font-size: 24px;
            color: #cc0000;
            font-weight: bold;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6c757d;
            width: auto;
            padding: 0;
        }
        
        .close-btn:hover {
            color: #cc0000;
            transform: none;
            box-shadow: none;
        }
        
        .linha-info {
            margin-bottom: 15px;
        }
        
        .linha-descricao {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 20px;
            font-family: "Rubik", sans-serif;
            color: #cc0000;
            text-align: center;
        }
        
        .bairros-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }
        
        .bairro-tag {
            background: #f8f9fa;
            padding: 5px 10px;
            border-radius: 4px;
            border: 1px solid #dee2e6;
            font-size: 14px;
        }
        
        .button1 {
            margin-top: 3px;
            padding: 10px;
            box-sizing: border-box;
            display: flex;        
        }

        .botao2 {
            margin-left: 5px;
            margin-right: 5px;
        }

        h2 {
            color: #333;
            text-align: center;
        }

        /* Estilos para a galeria de imagens */
        .galeria-container {
            position: relative;
            margin-top: 60px;
            text-align: center;
            height: 350px;
            overflow: hidden;
        }

        .amostragem {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
            max-width: 600px;
            height: 300px;
            position: relative;
        }

        .amostragem img {
            max-width: 100%;
            max-height: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease-in-out;
            position: absolute;
        }

        .pass_img, .pass_img2 {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
        }

        .pass_img {
            right: 20px;
        }

        .pass_img2 {
            left: 20px;
        }

        .pass_img button, .pass_img2 button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #cc0000;
            color: white;
            border: none;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pass_img button:hover, .pass_img2 button:hover {
            background: #a30000;
            transform: scale(1.1);
        }

        .contador-imagem {
            text-align: center;
            margin-top: 15px;
            color: #cc0000;
            font-size: 16px;
            font-weight: bold;
            background: rgba(255,255,255,0.9);
            padding: 8px 15px;
            border-radius: 20px;
            display: inline-block;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        /* Navegação responsiva */
        nav {
            padding: 0 20px;
            font-family: "Rubik", sans-serif;
            font-size: 20px;
        }
        
        .nav_container {
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
        }

        .menu {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
        }

        .menu li {
            margin-top: 10px;
            position: relative;
            background-color: #8a0303;
        }

        .menu li a {
            display: block;
            color: #f8f9fa;
            text-decoration: none;
            padding: 20px;
            white-space: nowrap;
        }

        .menu li:hover {
            background-color: #cc0000;
        }

        .dropdown {
            position: relative;
            border: 1px solid #a30000;
            border-radius: 20px;
        }

        .dropdown_content {
            display: none;
            position: absolute;
            background-color: #cc0000;
            min-width: 200px;
            z-index: 2;
        }

        .dropdown_content a {
            padding: 12px 16px;
            display: block;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s;
        }

        .dropdown_content a:hover {
            background-color: #a30000;
        }

        .dropdown:hover .dropdown_content {
            display: block;
        }
        
        /* Estilos para o layout do modal responsivo */
        .modal-layout {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .modal-image-container {
            text-align: center;
            margin: 15px 0;
        }
        
        .modal-map-container {
            text-align: center;
            margin: 15px 0;
        }
        
        .modal-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            border: 2px solid #cc0000;
        }
        
        .modal-map {
            width: 100%;
            height: 400px;
            border: 0;
            border-radius: 8px;
        }

        /* Media Queries para responsividade */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .header-image-main {
                width: 180px;
                height: 100px;
            }
            
            .header-image {
                width: 140px;
                height: 100px;
            }
            
            .linha-descricao {
                text-align: center;
            }
            
            h2 {
                text-align: center;
            }
            
            .button1 {
                flex-direction: column;
                gap: 10px;
            }
            
            .botao2 {
                margin-left: 0;
                margin-right: 0;
            }

            .pass_img {
                right: 10px;
            }

            .pass_img2 {
                left: 10px;
            }

            .pass_img button, .pass_img2 button {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .galeria-container {
                height: 300px;
            }

            .amostragem {
                height: 250px;
            }
            
            .menu {
                flex-direction: column;
                align-items: center;
            }
            
            .menu li {
                width: 100%;
                text-align: center;
            }
            
            .dropdown_content {
                position: static;
                width: 100%;
            }
            
            .modal-content {
                padding: 15px;
            }
            
            .modal-map {
                height: 300px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .subtitle {
                font-size: 16px;
            }
            
            .content {
                padding: 20px;
            }
            
            .galeria-container {
                height: 250px;
                margin-top: 40px;
            }

            .amostragem {
                height: 200px;
            }
            
            .pass_img button, .pass_img2 button {
                width: 35px;
                height: 35px;
                font-size: 14px;
            }
            
            .contador-imagem {
                font-size: 14px;
                padding: 6px 12px;
            }
            
            .modal-title {
                font-size: 20px;
            }
            
            .modal-map {
                height: 250px;
            }
            
            .linha-btn {
                font-size: 14px;
                padding: 4px 8px;
            }
        }
        
        @media (min-width: 769px) {
            .modal-layout {
                flex-direction: row;
                flex-wrap: wrap;
            }
            
            .modal-image-container {
                flex: 1;
                min-width: 300px;
            }
            
            .modal-map-container {
                flex: 1;
                min-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <img src="https://i.imgur.com/PolKIwx.png" alt="Brasão de João Pessoa" class="header-image-main">
                <img src="https://i.imgur.com/ygxe7QR.png" alt="JP - Capital da Paraíba" class="header-image">
                <div class="header-text">
                    <h1>JOÃO PESSOA - PB</h1>
                    <p class="subtitle">Sistema de Consulta de Empenas Caju</p>
                </div>
            </div>
        </div>

        <nav>
            <div class="nav_container">
                <ul class="menu">
                    <li class="dropdown">
                        <strong><a href="#" class="dropdown">ESTADOS</a></strong>
                        <div class="dropdown_content">
                            <a href="pernambuco.html">Pernambuco</a>
                        </div>
                    </li>

                    <li class="dropdown">
                        <strong><a href="#" class="dropdown">CIDADES</a></strong>
                        <div class="dropdown_content">
                            <a href="index.html">Campina Grande</a>
                        </div>
                    </li>

                    <li class="dropdown">
                        <strong><a href="#">BAIRROS ATENDIDOS</a></strong>
                        <div class="dropdown_content">
                            <a href="#" onclick="selecionarBairro('Torre')">Torre</a>
                            <a href="#" onclick="selecionarBairro('Água Fria')">Água Fria</a>
                            <a href="#" onclick="selecionarBairro('Oitizeiro')">Oitizeiro</a>
                            <a href="#" onclick="selecionarBairro('Jaguaribe')">Jaguaribe</a>
                            <a href="#" onclick="selecionarBairro('Cabo Branco')">Cabo Branco</a>
                            <a href="#" onclick="selecionarBairro('Tambaú')">Tambaú</a>
                            <a href="#" onclick="selecionarBairro('Manaíra')">Manaíra</a>  
                        </div>
                    </li>
                </ul>
            </div>
        </nav>

        <!-- Galeria de Imagens -->
        <div class="galeria-container">
            <div class="pass_img2">
                <button type="button" onclick="imagemAnterior()">❮</button>
            </div>

            <div class="amostragem">   
                <img id="imagemAtual" src="" alt="Imagem da galeria">
            </div>

            <div class="pass_img">
                <button type="button" onclick="proximaImagem()">❯</button>
            </div>

            <div class="contador-imagem">
                <span id="contador">1/5</span>
            </div>
        </div>

        <div class="content">
            <div class="input-group">
                <label for="bairrosInput">Digite o Bairro Desejado:(Não Precisa de Acentos, Nem letras maiúsculas)</label>
                <input type="text" id="bairrosInput" placeholder="Ex: Torre, Cabo Branco, Manaíra">
            </div>
            
            <button onclick="buscarLinhas()" id="consultarBtn">Consultar Empenas</button>
            <button onclick="limparResultados()" class="clear-btn">Limpar Resultados</button>
            
            <div class="result-container">
                <div class="result-title">Empenas encontradas:</div>
                <div id="resultado">Os resultados aparecerão aqui</div>
            </div>
        </div>
        
        <div class="footer">
            © 2025 Caju Conecta
        </div>
    </div>

    <!-- Modal para detalhes da linha -->
    <div class="modal" id="linhaModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalLinhaNumero">Empena</div>
                <button class="close-btn" onclick="fecharModal()">&times;</button>
            </div>
            <div id="modalConteudo">
            </div>
        </div>
    </div>

    <script>
        // ========== GALERIA DE IMAGENS ==========
        const galeriaImagens = [
            "galeria/joao_pessoa_img/img1.jpg",
            "galeria/joao_pessoa_img/img2.jpg",
            "galeria/joao_pessoa_img/img3.jpg",
            "galeria/joao_pessoa_img/img4.jpg",
            "galeria/joao_pessoa_img/img5.jpg",
        ];

        let imagemIndex = 0;
        let estaTransicionando = false;

        // Função para inicializar a galeria
        function inicializarGaleria() {
            const imagemAtual = document.getElementById('imagemAtual');
            const contador = document.getElementById('contador');
            
            if (imagemAtual && galeriaImagens.length > 0) {
                imagemAtual.src = galeriaImagens[imagemIndex];
                atualizarContador();
                imagemAtual.style.transform = 'translateX(0)';
                imagemAtual.style.opacity = '1';
            }
        }

        // Função para atualizar o contador
        function atualizarContador() {
            const contador = document.getElementById('contador');
            if (contador) {
                contador.textContent = `${imagemIndex + 1}/${galeriaImagens.length}`;
            }
        }

        // Função para próxima imagem com transição lateral
        function proximaImagem() {
            if (estaTransicionando) return;
            
            estaTransicionando = true;
            const imagemAtual = document.getElementById('imagemAtual');
            
            // Efeito de saída para a esquerda
            imagemAtual.style.transform = 'translateX(-100%)';
            imagemAtual.style.opacity = '0';
            
            setTimeout(() => {
                imagemIndex = (imagemIndex + 1) % galeriaImagens.length;
                imagemAtual.src = galeriaImagens[imagemIndex];
                atualizarContador();
                
                // Posiciona a nova imagem à direita (fora da tela)
                imagemAtual.style.transform = 'translateX(100%)';
                imagemAtual.style.opacity = '1';
                
                // Efeito de entrada da direita para o centro
                setTimeout(() => {
                    imagemAtual.style.transform = 'translateX(0)';
                    imagemAtual.style.opacity = '1';
                    estaTransicionando = false;
                }, 50);
            }, 300);
        }

        // Função para imagem anterior com transição lateral
        function imagemAnterior() {
            if (estaTransicionando) return;
            
            estaTransicionando = true;
            const imagemAtual = document.getElementById('imagemAtual');
            
            // Efeito de saída para a direita
            imagemAtual.style.transform = 'translateX(100%)';
            imagemAtual.style.opacity = '0';
            
            setTimeout(() => {
                imagemIndex = (imagemIndex - 1 + galeriaImagens.length) % galeriaImagens.length;
                imagemAtual.src = galeriaImagens[imagemIndex];
                atualizarContador();
                
                // Posiciona a nova imagem à esquerda (fora da tela)
                imagemAtual.style.transform = 'translateX(-100%)';
                imagemAtual.style.opacity = '1';
                
                // Efeito de entrada da esquerda para o centro
                setTimeout(() => {
                    imagemAtual.style.transform = 'translateX(0)';
                    imagemAtual.style.opacity = '1';
                    estaTransicionando = false;
                }, 50);
            }, 300);
        }

        // ========== SISTEMA DE CONSULTA DE EMPENAS ==========
        // Dados organizados e corrigidos
        const dados = [
            {
                bairro: "Torre",
                variacoes: ["Av. Min. José Américo", "Avenida Ministro José Américo"],
                empenas: ["Empena Torre(Av. Min. José Américo)", "Empena Torre(Av. Min. José Américo 2)"]
            },

            {
                bairro: "Água Fria",
                variacoes: ["R. Diógenes Chianco", "Rua Diógenes Chianco"],
                empenas: ["Empena Água Fria"]
            },

            {
                bairro: "Oitizeiro",
                variacoes: ["Av. Cruz das Armas", "Avenida Cruz das Armas"],
                empenas: ["Empena Oitizeiro"]
            },

            {
                bairro: "Jaguaribe",
                variacoes: ["R. Francisco Manoel", "Rua Francisco Manoel,"],
                empenas: ["Empena Jaguaribe"]
            },

            {
                bairro: "Cabo Branco",
                variacoes: ["Av. Monsenhor Odilon Coutinho", "Avenida Monsenhor Odilon Coutinho","R. Marcionila da Conceição","Rua Marcionila da Conceição" ],
                empenas: ["Empena Cabo Branco(Monsenhor Odilon Coutinho 1)", "Empena Cabo Branco(Marcionila da Conceição)","Empena Cabo Branco(Av. Monsenhor Odilon Coutinho 2)"]
            },

            {
                bairro: "Tambaú",
                variacoes: ["Av. Pres. Epitácio Pessoa","Avenida Presidente Epitácio Pessoa", "Avenida Nego","Av. Nego", "Av. Silvino Lopes", "Avenida Silvino Lopes"],
                empenas: ["Empena Tambaú(Epitácio Pessoa)", "Empena Tambaú(Avenida Nego 1)", "Empena Tambaú(Silvino Lopes)", "Empena Tambaú(Avenida Nego 2)","Empena Tambaú(Maria Sales)","Empena Tambaú(Ruy Carneiro)", "Empena Tambaú(Tamandaré)"]
            },
            {
                bairro: "Manaíra",
                variacoes: ["Av. Monteiro da Franco"],
                empenas: ["Empena Manaíra(Avenida Monteiro da Franco)", "Empena Manaíra(João Câncio)","Empena Manaíra(Avenida Esperança 1)","Empena Manaíra(Avenida Esperança 2)","Empena Manaíra(Avenida Esperança 3)"]
            },
        ];

        // Imagens especiais (mapas das linhas)
        const imagensEspeciais = {
            "Empena ": "img/1.jpg",
        };

        // Google Maps para cada EMPENA
        const mapasEmpenas = {
            "Empena Torre(Av. Min. José Américo)": "https://www.google.com/maps/embed?pb=!4v1762363868109!6m8!1m7!1szTd_O7-JYvO64N7A7hCVsA!2m2!1d-7.125628368075374!2d-34.86605146001754!3f117.92860669693124!4f43.70450976314277!5f0.7820865974627469",
            "Empena Torre(Av. Min. José Américo 2)":"https://www.google.com/maps/embed?pb=!4v1762364333426!6m8!1m7!1stKDjEaAju84nYNZ_uG5sQw!2m2!1d-7.125779545315673!2d-34.86546173586122!3f284.51174384922746!4f28.49091405206039!5f1.6049566810005436",

            "Empena Água Fria": "https://www.google.com/maps/embed?pb=!4v1762364738443!6m8!1m7!1s9QlVDNvC7NdCX_A4xrVnqg!2m2!1d-7.152883414158302!2d-34.85468541661261!3f140.73572468997764!4f13.80542225764681!5f1.7393136487924705",

            "Empena Oitizeiro": "https://www.google.com/maps/embed?pb=!4v1762365168488!6m8!1m7!1sz5qdIu4MhelJMzRv10ulrw!2m2!1d-7.158571135563497!2d-34.896177528085!3f250.9782712044627!4f28.558930394341743!5f1.5367796089705652",

            "Empena Jaguaribe": "https://www.google.com/maps/embed?pb=!4v1762366027848!6m8!1m7!1sLaCGTaWaaWUJ2mEhq_AeGQ!2m2!1d-7.135450661332804!2d-34.87928112272632!3f45.884752480518856!4f21.44318170704645!5f1.1020631405170858",

            "Empena Cabo Branco(Monsenhor Odilon Coutinho 1)": "https://www.google.com/maps/embed?pb=!4v1762366204766!6m8!1m7!1sxMA8fgIxCLX3rDHo4MAMIQ!2m2!1d-7.125023151008699!2d-34.82753114724093!3f65.90079226118236!4f32.928061900812125!5f0.7820865974627469",
            "Empena Cabo Branco(Marcionila da Conceição)": "https://www.google.com/maps/embed?pb=!4v1762366614629!6m8!1m7!1s8HHLrwrxsPNGvLPDgKYb6A!2m2!1d-7.123222883811312!2d-34.82597841245482!3f29.565712326709196!4f28.75637855833037!5f0.7820865974627469",
            "Empena Cabo Branco(Av. Monsenhor Odilon Coutinho 2)" : "https://www.google.com/maps/embed?pb=!4v1762367031582!6m8!1m7!1s1yWDWXulq6EYsnUT4ckaOA!2m2!1d-7.12492694424039!2d-34.82595945902679!3f113.6374395178297!4f20.719991497350023!5f1.6049566809995968",

            "Empena Tambaú(Epitácio Pessoa)": "https://www.google.com/maps/embed?pb=!4v1762367301061!6m8!1m7!1sE5BThq5Y0QyZvC8ndKC5Rg!2m2!1d-7.119396549948025!2d-34.82908654931781!3f296.55170429158085!4f18.89139916858069!5f1.6047934451321626",
            "Empena Tambaú(Avenida Nego 1)": "https://www.google.com/maps/embed?pb=!4v1762367991797!6m8!1m7!1so7Lew0vmyQ-41xxSKkEy_Q!2m2!1d-7.114005956538417!2d-34.82543988074945!3f75.45939531319718!4f17.713199698007585!5f1.5609236516162577",
            "Empena Tambaú(Silvino Lopes)": "https://www.google.com/maps/embed?pb=!4v1762368254964!6m8!1m7!1s-f_5AlUz8H-ywTYXir8yGA!2m2!1d-7.113749115385557!2d-34.82815752323388!3f236.4979746857969!4f19.260123023733513!5f1.4653698045756918",
            "Empena Tambaú(Avenida Nego 2)": "https://www.google.com/maps/embed?pb=!4v1762368422420!6m8!1m7!1sOSXGIOCvRx_xL47Nx7Mj9A!2m2!1d-7.114225214423461!2d-34.82452302966554!3f86.85326116357611!4f9.776251422769946!5f1.8835584403069778",
            "Empena Tambaú(Maria Sales)": "https://www.google.com/maps/embed?pb=!4v1762368556270!6m8!1m7!1sutxRhSboGofr0V-1DAc5Mg!2m2!1d-7.115941148680696!2d-34.82588718324931!3f229.5222237020733!4f17.934708204279218!5f1.5366990362433914",
            "Empena Tambaú(Ruy Carneiro)": "https://www.google.com/maps/embed?pb=!4v1762368695988!6m8!1m7!1sUZz-mBmvnlbHNi8DEKSQDQ!2m2!1d-7.11361867343378!2d-34.83099628995788!3f217.92952528174405!4f29.28147032695405!5f1.1400645111474002",
            "Empena Tambaú(Tamandaré)": "https://www.google.com/maps/embed?pb=!4v1762368904637!6m8!1m7!1s1rUYs6lBNcN2ZdWwZhiepg!2m2!1d-7.118249575081252!2d-34.82352866810956!3f352.1103149928674!4f21.30718720299943!5f0.685613202767758",

            "Empena Manaíra(Avenida Monteiro da Franco)": "https://www.google.com/maps/embed?pb=!4v1762369509391!6m8!1m7!1sLwYx7WxJNXa4R15y1_6lZA!2m2!1d-7.106541079128832!2d-34.83408234465054!3f164.6824948671155!4f15.985217251927835!5f0.9833635448866048",
            "Empena Manaíra(João Câncio)": "https://www.google.com/maps/embed?pb=!4v1762371087411!6m8!1m7!1svdwxacBhyksRolK5pLAUyw!2m2!1d-7.104008842291115!2d-34.83656615108032!3f14.807412046729398!4f9.279817039092777!5f1.6049566810014904",
            "Empena Manaíra(Avenida Esperança 1)": "https://www.google.com/maps/embed?pb=!4v1762371259097!6m8!1m7!1sH8JE6AHc4KEJZI5dH_1_yg!2m2!1d-7.101102465076419!2d-34.83682902317574!3f199.548611058376!4f29.97952601174366!5f0.7820865974627469",
            "Empena Manaíra(Avenida Esperança 2)": "https://www.google.com/maps/embed?pb=!4v1762371381672!6m8!1m7!1sLo3UELW0jK-T-rJ-l1TGIQ!2m2!1d-7.103747729432836!2d-34.8351289735073!3f131.29472339864446!4f25.03137671182178!5f0.7820865974627469",
            "Empena Manaíra(Avenida Esperança 3)": "https://www.google.com/maps/embed?pb=!4v1762371526393!6m8!1m7!1sAjp1wz5wWoPq4GkHxLi9wQ!2m2!1d-7.109683306231825!2d-34.83022463251718!3f166.99841336348516!4f8.878314970078492!5f1.6049566810014904",


        };

        // Ignorar Acentos
        function normalizar(str) {
            return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
        }

        // Função para selecionar bairro do dropdown
        function selecionarBairro(bairro) {
            document.getElementById('bairrosInput').value = bairro;
            buscarLinhas();
        }

        function buscarLinhas() {
            const input = document.getElementById('bairrosInput').value.trim();
            
            // Validação de entrada
            if (!input) {
                document.getElementById('resultado').innerHTML = "<span style='color: #cc0000;'>Por favor, digite um bairro para consultar.</span>";
                return;
            }
            
            const bairrosProcurados = input.split(',').map(b => normalizar(b.trim()));

            // Mostrar loading
            document.getElementById('resultado').innerHTML = "<span class='loading'></span>Buscando Empenas...";
            document.getElementById('resultado').className = "info";
            // Desabilitar botão durante a busca
            document.getElementById('consultarBtn').disabled = true;

            // Simular um tempo de processamento
            setTimeout(() => {
                let resultadosHTML = "";
                let encontrouResultados = false;
                
                // Para cada bairro procurado
                bairrosProcurados.forEach(bairroProcurado => {
                    if (!bairroProcurado) return; // Pular entradas vazias
                    
                    // Encontrar o bairro correspondente na base de dados
                    // Agora verificamos tanto o nome principal quanto as variações
                    const bairroEncontrado = dados.find(d => 
                        normalizar(d.bairro) === bairroProcurado || 
                        d.variacoes.some(v => normalizar(v) === bairroProcurado)
                    );
                    
                    if (bairroEncontrado) {
                        encontrouResultados = true;
                        resultadosHTML += `
                            <div class="bairro-result">
                                <div class="bairro-title">${bairroEncontrado.bairro}</div>
                                <div style="font-size: 14px; color: #666; margin-bottom: 8px;">
                                </div>
                                <div class="linhas-list">
                                    ${bairroEncontrado.empenas.map(empena => 
                                        `<button class="linha-btn" onclick="mostrarDetalhesEmpena('${empena}')">${empena}</button>`
                                    ).join('')}
                                </div>
                            </div>
                        `;
                    } else {
                        resultadosHTML += `
                            <div class="bairro-result">
                                <div class="bairro-title">${bairroProcurado}</div>
                                <div class="no-linhas">Nenhuma Empena encontrada para este bairro</div>
                            </div>
                        `;
                    }
                });
                
                // Se não houver resultados válidos
                if (!encontrouResultados) {
                    resultadosHTML = "<div class='no-linhas'>Nenhum bairro válido foi informado.</div>";
                }
                
                document.getElementById('resultado').innerHTML = resultadosHTML;
                document.getElementById('resultado').className = "";
                
                // Reabilitar o botão
                document.getElementById('consultarBtn').disabled = false;
            }, 800);
        }

        function mostrarDetalhesEmpena(empena) {
            // Verifica se tem imagem especial, senão usa a padrão
            const imagemEmpena = imagensEspeciais[empena] || "https://i.imgur.com/ygxe7QR.png";
            
            // Obter o mapa específico para a empena
            const mapaEmpena = mapasEmpenas[empena] || "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3958.258663292987!2d-35.88872292501706!3d-7.215845392848311!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x7ac1f4d8b1b3f3b%3A0x5c5e5c5e5c5e5c5e!2sCampina%20Grande%20-%20PB!5e0!3m2!1spt-BR!2sbr!4v1234567890";
            
            let modalHTML = "";
            
           // Informações adicionais sobre a empena
            modalHTML += `
                <div class="linha-info">
                    <div class="linha-descricao"></div>
                    </div>
                </div>
            `;

            // Layout responsivo para imagem e mapa
            modalHTML += `
                <div class="modal-layout">
                    <div class="modal-image-container">
                        <img src="${imagemEmpena}" 
                             alt="Empena ${empena}" 
                             class="modal-image">
                    </div>
                    <div class="modal-map-container">
                        <iframe 
                            src="${mapaEmpena}" 
                            class="modal-map" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                </div>
            `;

            document.getElementById('modalLinhaNumero').textContent = `${empena}`;
            document.getElementById('modalConteudo').innerHTML = modalHTML;
            document.getElementById('linhaModal').style.display = 'flex';
        }

        // Função para fechar o modal
        function fecharModal() {
            document.getElementById('linhaModal').style.display = 'none';
        }

        // Fechar modal ao clicar fora dele
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('linhaModal');
            if (event.target === modal) {
                fecharModal();
            }
        });

        // Função para limpar os resultados
        function limparResultados() {
            document.getElementById('resultado').innerHTML = "Os resultados aparecerão aqui";
            document.getElementById('bairrosInput').value = "";
            document.getElementById('resultado').className = "";
        }

        // Enter Para Rodar O Código
        document.getElementById("bairrosInput").addEventListener("keydown", function(e) {
            if (e.key === "Enter") {
                buscarLinhas();
            }
        });

        // Funções de navegação (mantidas as originais)
        function voltarpagina() {
            window.location.href = "Rotas Caruaru.html";             
        }

        function voltarpagina2() {
            window.location.href = "Rotas Natal.html";             
        }

        function voltarpagina3() {
            window.location.href = "Rotas João Pessoa.html";             
        }

        // Inicializar a galeria quando a página carregar
        document.addEventListener('DOMContentLoaded', function() {
            inicializarGaleria();
        });
    </script>
</body>
</html>